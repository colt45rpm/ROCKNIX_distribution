#!/bin/sh
# SPDX-License-Identifier: GPL-2.0
# Copyright (C) 2025-present ROCKNIX (https://github.com/ROCKNIX)

. /etc/profile.d/001-functions

#Disable retroarch microphone and set default audio driver to pulse
sed -i '/^microphone_enable =/c\microphone_enable = "false"' /storage/.config/retroarch/retroarch.cfg
sed -i '/^audio_driver =/c\audio_driver = "pulse"' /storage/.config/retroarch/retroarch.cfg

#Set default layouts for 3DS
THREE_DS_SCREEN_LAYOUT=$(get_setting "3ds.screen_layout")
if [ ! -n "${THREE_DS_SCREEN_LAYOUT}" ]; then
  set_setting "3ds.screen_layout" "5"
fi

#Set default layouts for NDS
NDS_SCREEN_LAYOUT=$(get_setting "nds.screen_layout")
if [ ! -n "${NDS_SCREEN_LAYOUT}" ]; then
  set_setting "nds.screen_layout" "6"
fi
