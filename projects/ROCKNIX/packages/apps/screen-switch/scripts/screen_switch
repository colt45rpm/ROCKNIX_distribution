#!/bin/bash

source /etc/profile

# Get the active app_id
ACTIVE_APPID=$(swaymsg -t get_tree | awk '
  /"focused": true/ {focused=1}
  focused && /app_id/ {gsub(/.*"app_id": *"/,""); gsub(/".*/,""); print; exit}
')

UDSI=$(swaymsg -t get_tree | jq -r '.. | objects | select(.type == "output" and .name != "__i3") | select(.nodes[].nodes | length == 0) | .name')

swaymsg [app_id=\"${ACTIVE_APPID}\"] move window to output ${UDSI}
